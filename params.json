{
  "name": "Laravel Wizzy",
  "tagline": "A laravel install wizard",
  "body": "Laravel-wizzy\r\n============\r\nLaravel-wizzy was created by, and is maintained by [Filippo Galante](https://github.com/IlGala), and is a configurable laravel install wizard that permits a user to check system requirements, setup environment and run database migrations and seed. Feel free to check out the [change log](CHANGELOG.md), [releases](https://github.com/IlGala/laravel-wizzy/releases), [license](LICENSE), and [contribution guidelines](CONTRIBUTING.md).\r\n\r\n[![StyleCI](https://styleci.io/repos/66010854/shield)](https://styleci.io/repos/66010854)\r\n[![Latest Stable Version](https://poser.pugx.org/ilgala/laravel-wizzy/v/stable)](https://packagist.org/packages/ilgala/laravel-wizzy)\r\n[![Total Downloads](https://poser.pugx.org/ilgala/laravel-wizzy/downloads)](https://packagist.org/packages/ilgala/laravel-wizzy)\r\n[![Latest Unstable Version](https://poser.pugx.org/ilgala/laravel-wizzy/v/unstable)](https://packagist.org/packages/ilgala/laravel-wizzy)\r\n[![License](https://poser.pugx.org/ilgala/laravel-wizzy/license)](https://packagist.org/packages/ilgala/laravel-wizzy)\r\n\r\n## Installation\r\n\r\nRequirements:\r\n\r\n- PHP 5.5+\r\n- Laravel\r\n\r\nTo get the latest version of Laravel Wizzy, simply require the project using [Composer](https://getcomposer.org):\r\n\r\n```bash\r\n$ composer require ilgala/wizzy\r\n```\r\n\r\nInstead, you may of course manually update your require block and run `composer update` if you so choose:\r\n\r\n```json\r\n{\r\n    \"require\": {\r\n        \"ilgala/wizzy\": \"dev-master\"\r\n    }\r\n}\r\n```\r\n\r\nOnce Laravel Wizzy is installed, you need to register the service provider. Open up `config/app.php` and add the following to the `providers` key.\r\n\r\n* `IlGala\\LaravelWizzy\\WizzyServiceProvider::class`\r\n\r\nYou can register the Wizzy facade in the `aliases` key of your `config/app.php` file if you like.\r\n\r\n* `'Wizzy' => 'IlGala\\LaravelWizzy\\Facades\\Wizzy'`\r\n\r\n\r\n## Configuration\r\n\r\nLaravel Wizzy supports optional configuration.\r\n\r\nTo get started, you'll need to publish all vendor assets:\r\n\r\n```bash\r\n$ php artisan vendor:publish\r\n```\r\n\r\nThis will create a `config/wizzy.php` file in your app that you can modify to set your configuration. The `publish` command will also copy the package's views and the `public/assets` folder. Also, make sure you check for changes to the original config file in this package between releases.\r\n\r\nThere are several config options:\r\n\r\n##### Wizzy Enable flag\r\nThis option specifies if the wizzy is enabled and will be considered only if the .env file doesn't contain any WIZZY_ENABLED key.\r\n    \r\n    Default: true\r\n\r\n##### Application System Requirements\r\nThis set of options specifies the application requirements for php and the filesystem permissions. Only the required PHP version is mandatory forthe wizard.\r\n    \r\n    Default values\r\n        'php' => [\r\n            'required' => 'x.x.x', // Default: laravel required version\r\n            'preferred' => 'x.x.x', // Default: laravel required version\r\n        ],\r\n        'php_extensions' => [ // Default: laravel required extensions\r\n            'OpenSSL',\r\n            'PDO',\r\n            'Mbstring',\r\n            'Tokenizer',\r\n        ],\r\n        'permissions' => [ // Default: laravel filesystem permissions\r\n            'storage/app/' => '775',\r\n            'storage/framework/' => '775',\r\n            'storage/logs/' => '775',\r\n            'bootstrap/cache/' => '775',\r\n        ],\r\n    ],\r\n##### Wizzy Steps\r\nThis set of options specifies if the environment view and the database view are enabled in the wizard. If the parameters are setted to false, the wizard will skip one or both steps.\r\n      \r\n    environment default: true\r\n    database default: true\r\n  \r\n##### Wizzy Routes Prefix\r\nThis option specifies Wizzy's routes group prefix in order to avoid conflicts with other routes of the application.\r\n\r\n    Default: install\r\n\r\n##### Environment Filename\r\nApplication's environment file used to parse the environment variables.\r\n\r\n    Default: .env\r\n\r\n##### Migrations Path\r\nApplication's path to migrations files.\r\n\r\n    Default: database/migrations\r\n\r\n##### Force Flag\r\nIf this option is setted to true, the migration command will be runned with --force attribute.\r\n\r\n    Default: false\r\n\r\n##### Conclusion Scripts\r\nThis set of options contains all the artisan scripts that will be runned during the last step of the wizard.\r\n\r\nThe defaults scripts runned are:\r\n\r\n- **clear-compiled:** Remove the compiled class file\r\n- **optimize:** Optimize the framework for better performance\r\n- **config:clear:** Remove the configuration cache file\r\n- **config:cache:** Create a cache file for faster configuration loading\r\n\r\nFor more informations about the artisan commands please refer to the official documentation.\r\n\r\n##### Redirect To\r\nThis is the url used to redirect the user when the application install process is completed.\r\n\r\n    Default: /\r\n\r\n\r\n## Usage\r\n\r\n##### Facades\\Wizzy\r\n\r\nThis facade will dynamically pass static method calls to the 'wizzy' object in the ioc container which by default is the `IlGala\\LaravelWizzy\\Wizzy` class. This facade may be also used for a custom wizard creation. The declared methods may be used as helpers function for creating environment files, run database migrations or artisan commands.\r\n\r\n    /**\r\n     * Get wizzy route group prefix from the config file.\r\n     *\r\n     * @return string wizzy.prefix\r\n     */\r\n    Wizzy::getPrefix();\r\n\r\n    /**\r\n     * Get wizzy default evnironment filename from the config file.\r\n     *\r\n     * @return string wizzy.environment\r\n     */\r\n    Wizzy::getDefaultEnv();\r\n\r\n    /**\r\n     * Get wizzy conclusion view redirect url from the config file.\r\n     *\r\n     * @return string wizzy.redirectTo\r\n     */\r\n    Wizzy::getRedirectUrl();\r\n\r\n    /**\r\n     * Check if wizzy is enabled from the config file.\r\n     *\r\n     * @return bool true|false\r\n     */\r\n    Wizzy::isWizzyEnabled();\r\n\r\n    /**\r\n     * Check if wizzy environment step is enabled from the config file.\r\n     *\r\n     * @return string wizzy.steps.environment\r\n     */\r\n    Wizzy::isEnvironmentStepEnabled();\r\n\r\n    /**\r\n     * Check if wizzy database step is enabled from the config file.\r\n     *\r\n     * @return string wizzy.steps.database\r\n     */\r\n    Wizzy::isDatabaseStepEnabled();\r\n\r\n    /**\r\n     * Stores the $variables array as an environment file. If the $wizzy_enabled\r\n     * variable is true, then it will add WIZZY_ENABLED=false variable in the\r\n     * .env file.\r\n     *\r\n     * @param string $filename\r\n     * @param string $variables\r\n     * @param boolean $wizzy_enabled\r\n     * @return string filename\r\n     */\r\n    Wizzy::($filename, $variables, $wizzy_enabled = false);\r\n\r\n    /**\r\n     * Runs the artisan 'migrate' command.\r\n     *\r\n     * @param string $path\r\n     * @param boolean $refresh_database\r\n     * @param boolean $seed_database\r\n     */\r\n    Wizzy::runMigration($path, $refresh_database, $seed_database);\r\n\r\n    /**\r\n     * Retrieve all the migration files in the given path.\r\n     *\r\n     * @param type $path\r\n     * @return array\r\n     */\r\n    Wizzy::getMigrationsList($path);\r\n\r\n    /**\r\n     * Runs an artisan command.\r\n     *\r\n     * @param type $command\r\n     * @param type $attributes\r\n     * @return void\r\n     */\r\n    Wizzy::artisanCall($command, $attributes = []);\r\n\r\n\r\n\r\n##### WizzyServiceProvider\r\n\r\nThis class contains no public methods of interest. This class should be added to the providers array in `config/app.php`. This class will setup ioc bindings.\r\n\r\n##### WizzyMiddleware\r\n\r\nWizzy includes a middleware used to redirect the application routes to the installation wizard. In order to enable the redirection, you have to register the middleware as global in the app/Http/Kernel.php file like this:\r\n\r\n    <?php\r\n\r\n    namespace App\\Http;\r\n\r\n    use Illuminate\\Foundation\\Http\\Kernel as HttpKernel;\r\n\r\n    class Kernel extends HttpKernel\r\n    {\r\n\r\n        /**\r\n         * The application's route middleware groups.\r\n         *\r\n         * @var array\r\n         */\r\n        protected $middlewareGroups = [\r\n            'web' => [\r\n                // Other middlewares\r\n                // Register laravel wizzy as global middleware\r\n                \\IlGala\\LaravelWizzy\\Middleware\\WizzyMiddleware::class,\r\n            ],\r\n            'api' => [\r\n                'throttle:60,1',\r\n            ],\r\n        ];\r\n\r\nOtherwise you can register the middleware as individual and select which routes of your application may run the wizard.\r\n\r\n        /**\r\n         * The application's route middleware.\r\n         *\r\n         * These middleware may be assigned to groups or used individually.\r\n         *\r\n         * @var array\r\n         */\r\n        protected $routeMiddleware = [\r\n            // Other middlewares\r\n            // Register laravel wizzy as individual middleware\r\n            'wizzy' => \\IlGala\\LaravelWizzy\\Middleware\\WizzyMiddleware::class,\r\n        ];\r\n\r\n    }\r\n\r\n##### WizzyController and WizzyInterface\r\n\r\nThe `WizzyInterface` can be used to create a `CustomWizardController` that may be called by the ajax calls of the jQueryPlugin.\r\n\r\n###### routes.php\r\n\r\n\r\n    Route::group(['prefix' => Wizzy::getPrefix(), 'namespace' => 'IlGala\\LaravelWizzy', 'middleware' => 'web'], function () {\r\n        Route::get('wizzy', ['as' => Wizzy::getPrefix() . '.wizzy', 'uses' => 'WizzyController@index']);\r\n        Route::get('environment', ['as' => Wizzy::getPrefix() . '.environment', 'uses' => 'WizzyController@environment']);\r\n        Route::get('database', ['as' => Wizzy::getPrefix() . '.database', 'uses' => 'WizzyController@database']);\r\n        Route::get('conclusion', ['as' => Wizzy::getPrefix() . '.conclusion', 'uses' => 'WizzyController@conclusion']);\r\n        Route::post('execute', ['as' => Wizzy::getPrefix() . '.execute', 'uses' => 'WizzyController@execute']);\r\n    });\r\n\r\n###### index(Request $request)\r\n\r\nThis method is called when the first wizard step is created. Required output for the jQuery plugin:\r\n- `version`: \r\n    ```\r\n    array [\r\n        'required' => true|false,\r\n        'preferred' => true|false,\r\n        'version' => current_version|preferred_version|empty string\r\n    ];\r\n    ```\r\n- `extensions`: \r\n   ```\r\n    array [\r\n        'ext1' => false|ext1 version,\r\n        'ext2' => false|ext2 version,\r\n        'ext3' => false|ext3 version,\r\n        [...]\r\n    ];\r\n    ```\r\n- `nextEnabled`: \r\n    \r\n    ```\r\n    true|false\r\n    ```\r\n    \r\n###### environment(Request $request)\r\nThis method is called when the environment wizard step is created. Required output for the jQuery plugin:\r\n\r\n- `filename`: \r\n    ```\r\n    string\r\n    ```\r\n- `env_variables`: \r\n    ```\r\n    array [\r\n        'key' => 'variable value',\r\n        'key' => 'variable value',\r\n        'key' => 'variable value',\r\n        'key' => 'variable value',\r\n    ];\r\n    ```\r\n###### database(Request $request)\r\nThis method is called when the database wizard step is created. Required output for the jQuery plugin:\r\n\r\n- `migrations`: \r\n    ```\r\n    array [\r\n        'migration name or migration filename',\r\n        'migration name or migration filename',\r\n        'migration name or migration filename',\r\n        'migration name or migration filename',\r\n    ];\r\n    ```\r\n\r\n###### conclusion(Request $request)\r\nThis method is called when the conclusion wizard step is created. The jQuery plugin doesn't require any output.\r\n\r\n###### execute(Request $request)\r\nThis method is called from the Wizzy jQuery plugin to store the environment variables and run the database migration. The ajax call data object contains the following keys:\r\n\r\n- Enviornment\r\n    ```\r\n    data = {\r\n        view: 'environment',\r\n        filename: 'filename',                           <-- default .env\r\n        variables: 'key:value|key:value|key:value'      <-- default pattern\r\n    };\r\n    ```\r\n- Enviornment\r\n    ```\r\n    data = {\r\n        view: 'database',\r\n        refresh: true|false,            <-- use to run migrate:refresh command\r\n        seed: true|false,               <-- migrate:refresh --seed\r\n    };\r\n    ```\r\n\r\n\r\n##### Views\r\n\r\nThis package is composed of three views:\r\n\r\n- `index.blade.php`: This view has the same structure of the default views genereted with the `make:auth` command.\r\n- `confirm_environment.blade.php`: The environment variables confirmation modal.\r\n- `confirm_database.blade.php`: The database migration start modal.\r\n\r\nThe package's views are stored in `resources/views/vendor/wizzy`.\r\n\r\n##### Wizzy plugin\r\n\r\nThe front-end jQuery plugin has been created using multiple patterns from [jQuery Boilerplate](https://jqueryboilerplate.com/). The plugin will initialize the wizard, manage the navigation between the steps and call the back-end using `$.ajax` calls.\r\n\r\nThe plugin is stored in `public/assets/js/wizzy` folder:\r\n```\r\npublic/assets/js/wizzy\r\n|-- css                 <-- Plugin css folder\r\n|   |-- wizzy.css\r\n|-- i18n                <-- Plugin locale folder\r\n|   |-- en.js\r\n|   |-- it.js\r\n|   |-- [...]\r\n|-- wizzy.js            <-- This is the plugin\r\n```\r\n\r\n###### Plugin initialization\r\n    \r\n    // Remember to include the scripts and the locale strings\r\n    <script src=\"/assets/js/wizzy/wizzy.js\"></script>\r\n    <script src=\"/assets/js/wizzy/i18n/en.js\"></script>\r\n    \r\n    // Initialization\r\n    <script>\r\n        $(document).ready(function () {\r\n            $('#wizzy').wizzy({\r\n                environment: {{ Wizzy::isEnvironmentStepEnabled() }},\r\n                database: {{ Wizzy::isDatabaseStepEnabled() }},\r\n                redirectUrl: \"{{ Wizzy::getRedirectUrl() }}\",\r\n                welcomeRoute: \"{{ route(Wizzy::getPrefix() . '.wizzy') }}\",\r\n                environmentRoute: \"{{ route(Wizzy::getPrefix() . '.environment') }}\",\r\n                databaseRoute: \"{{ route(Wizzy::getPrefix() . '.database') }}\",\r\n                conclusionRoute: \"{{ route(Wizzy::getPrefix() . '.conclusion') }}\",\r\n                executeRoute: \"{{ route(Wizzy::getPrefix() . '.execute') }}\",\r\n            });\r\n        });\r\n    </script>\r\n\r\n###### Plugin options\r\n\r\nOption | Default | Description |\r\n------------ | ------------- | ------------- |\r\n| environment      |  false | Enable/disable environment step |\r\n| database         |  false | Enable/disable database step    |\r\n| redirectUrl      |        /       | Conclusion step redirect url    |\r\n| welcomeRoute     |        -       | GET ajax call used to populate welcome view |\r\n| environmentRoute |        -       | GET ajax call used to populate enviornment view |\r\n| databaseRoute    |        -       | GET ajax call used to populate database view |\r\n| conclusionRoute  |        -       | GET ajax call used to populate conclusion view |\r\n| executeRoute     |        -       | POST ajax call used to store environment variables and run database migrations |\r\n\r\n###### Plugin callbacks\r\n\r\nCallback | Default | Input | Description |\r\n------------ | ------------- | ------------- | ------------- |\r\n| beforeRenderCallback | - | container, view | Called everytime a new view is shown but when the container is still empty or has been cleared of the previous view elements |\r\n| afterRenderCallback | - | container, view | Called after a new view content has been created |\r\n| navigationCallback  | - | button, view | Called when a view navigation button is clicked anyway before beforeRenderCallback |\r\n| previousCallback    | - | button, view | Called when the previous button is clicked anyway before beforeRenderCallback |\r\n| nextCallback        | - | button, view |Called when the previous button is clicked anyway before beforeRenderCallback or before the store ajax call |\r\n| conclusionCallback  | - | button, view |called when the previous button is clicked anyway before beforeRenderCallback |\r\n| undoCallback | - | button, modal | Called when the undo modal button is clicked |\r\n| environmentCallback | - | button, modal, data | environment submit button onClick event, if returns false no ajax call will be performed |\r\n| environmentCallback | - | button, modal, data | database submit button onClick event, if returns false no ajax call will be performed |\r\n\r\n###### Plugin methods\r\n\r\nThe plugin has the following public methods that can be called in this way:\r\n\r\n    $('.wizzy').wizzy('publicMethod', ...);\r\n    \r\nMethod | Input | Description |\r\n------------ | ------------- | ------------- |\r\nrenderContent | container, view, beforeRenderCallback, afterRenderCallback | This method renders one of the wizard views. The container must be a jquery object (ex. `$('<div />')`), the view is a integer (1 => welcome, 2 => environment or database or conclusion, 3 => database or conclusion, 4: conclusion).  |\r\n\r\n##### i18n\r\n\r\nThe translation files are located in `assets/js/wizzy/i18n`. The wizard has been translated in the following languages:\r\n\r\n- **EN**: english\r\n- **IT**: italian\r\n\r\nIf your language is missing please open an issue or make a pull request!\r\n\r\n##### Examples\r\n\r\nHere you can see a few examples of how you can customize the wizard.\r\n\r\n###### Callback examples\r\n   \r\n    // Remember to include the scripts and the locale strings\r\n    <script src=\"/assets/js/wizzy/wizzy.js\"></script>\r\n    <script src=\"/assets/js/wizzy/i18n/en.js\"></script>\r\n    \r\n    // Initialization\r\n    <script>\r\n        $(document).ready(function () {\r\n            $('#wizzy').wizzy({\r\n                beforeRenderCallback: function(container, view) {\r\n                    console.log(container); // jQuery object\r\n                    console.log(view);      // 1, 2, 3, 4\r\n                },\r\n                afterRenderCallback: function(container, view) {\r\n                    console.log(container); // jQuery object\r\n                    console.log(view);      // 1, 2, 3, 4\r\n                },\r\n                navigationCallback: function(button, view) {\r\n                    console.log(button);    // jQuery object\r\n                    console.log(view);      // jQuery object\r\n                },\r\n                previousCallback: function(button, view) {\r\n                    console.log(button);    // jQuery object\r\n                    console.log(view);      // jQuery object\r\n                },\r\n                nextCallback: function(button, view) {\r\n                    console.log(button);    // jQuery object\r\n                    console.log(view);      // jQuery object\r\n                },\r\n                conclusionCallback: function(button, view) {\r\n                    console.log(button);    // jQuery object\r\n                    console.log(view);      // jQuery object\r\n                },\r\n                undoCallback: function(button, modal) {\r\n                    console.log(button);    // jQuery object\r\n                    console.log(modal);     // jQuery object\r\n                },\r\n                environmentRoute: function(container, view, data) {\r\n                    console.log(button);    // jQuery object\r\n                    console.log(view);      // jQuery object\r\n                    console.log(data);      // jQuery object\r\n                    \r\n                    return true; // Ajax call will be performed,\r\n                },\r\n                environmentRoute: function(container, view, data) {\r\n                    console.log(button);    // jQuery object\r\n                    console.log(view);      // jQuery object\r\n                    console.log(data);      // jQuery object\r\n                    \r\n                    return false; // Ajax call won't be performed,\r\n                },\r\n            });\r\n        });\r\n    </script>\r\n\r\n###### Controller examples\r\n\r\n    COMING SOON\r\n\r\n## License\r\n\r\nLaravel Wizzy is licensed under [The MIT License (MIT)](LICENSE).\r\n\r\n## Known issues\r\n\r\n- The alpha phase just started... I'm looking for issues...",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}